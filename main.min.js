"use strict";$(function(){let a,s;function n(o,a="common"){let s="",n="",t,r,e;switch(a){case"common":s="灰",n="rgb(169, 169, 169)",t=o.aryCommonShoesQuantity,r=o.aryCommonShoesFloor;break;case"uncommon":s="綠",n="rgb(34, 139, 34)",t=o.aryUncommonShoesQuantity,r=o.aryUncommonShoesFloor;break;case"rare":s="藍",n="rgb(0, 191, 255)",t=o.aryRareShoesQuantity,r=o.aryRareShoesFloor;break;case"epic":s="紫",n="rgb(148, 0, 211)",t=o.aryEpicShoesQuantity,r=o.aryEpicShoesFloor;break;case"runners":s="跑者人數",n="rgb(255, 69, 0)",e=o.aryRunners}var l=[];switch(a){case"runners":l.push({label:"跑者 - 數量",yAxisID:"IdCommonQuantity",backgroundColor:n,borderColor:n,data:e});break;case"4_shoes_quantity":l.push({label:"灰",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(169, 169, 169)",borderColor:"rgb(169, 169, 169)",data:o.aryCommonShoesQuantity}),l.push({label:"綠",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(34, 139, 34)",borderColor:"rgb(34, 139, 34)",data:o.aryUncommonShoesQuantity}),l.push({label:"藍",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryRareShoesQuantity}),l.push({label:"紫",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(148, 0, 211)",borderColor:"rgb(148, 0, 211)",data:o.aryEpicShoesQuantity});break;case"4_shoes_floor":l.push({label:"灰",yAxisID:"IdCommonFloor",backgroundColor:"rgb(169, 169, 169)",borderColor:"rgb(169, 169, 169)",data:o.aryCommonShoesFloor}),l.push({label:"綠",yAxisID:"IdCommonFloor",backgroundColor:"rgb(34, 139, 34)",borderColor:"rgb(34, 139, 34)",data:o.aryUncommonShoesFloor}),l.push({label:"藍",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryRareShoesFloor}),l.push({label:"紫",yAxisID:"IdCommonFloor",backgroundColor:"rgb(148, 0, 211)",borderColor:"rgb(148, 0, 211)",data:o.aryEpicShoesFloor});break;default:l.push({label:s+" - 數量",yAxisID:"IdCommonQuantity",backgroundColor:n,borderColor:n,data:t}),l.push({label:s+" - 地板價",yAxisID:"IdCommonFloor",backgroundColor:"rgb(240, 128, 128)",borderColor:"rgb(240, 128, 128)",borderDash:[2,5],data:r})}return l}function o(){return{scales:{IdCommonQuantity:{type:"linear",display:!0,title:{text:"數量",display:!0},position:"left"},IdCommonFloor:{type:"linear",display:!0,title:{text:"Sol (Solana)",display:!0},position:"right",grid:{drawOnChartArea:!1}}},plugins:{zoom:{limits:{x:{minRange:50}},pan:{enabled:!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x",onZoomComplete({chart:o}){o.update()}}}}}}!async function(){s=await async function(){const o=await(await fetch("./db/stepnDB.json")).json(),a=[],s=[],n=[],t=[],r=[],e=[],l=[],i=[],m=[],d=[];return o.stepn.forEach(o=>{a.push(moment(o.time).format("M/D HH:mm ")),s.push(o.runners),n.push(o.shoes[0].quality),t.push(o.shoes[0].floor),r.push(o.shoes[1].quality),e.push(o.shoes[1].floor),l.push(o.shoes[2].quality),i.push(o.shoes[2].floor),m.push(o.shoes[3].quality),d.push(o.shoes[3].floor)}),{aryDateTime:a,aryRunners:s,aryCommonShoesQuantity:n,aryCommonShoesFloor:t,aryUncommonShoesQuantity:r,aryUncommonShoesFloor:e,aryRareShoesQuantity:l,aryRareShoesFloor:i,aryEpicShoesQuantity:m,aryEpicShoesFloor:d}}(),console.log(o(s)),a=new Chart(document.getElementById("StepNChart"),{type:"line",data:{labels:s.aryDateTime,datasets:n(s)},options:o(s)})}(),$("#btn-common").on("click",function(o){a.data.datasets=n(s,"common"),a.options.scales.IdCommonFloor.display=!0,a.options.scales.IdCommonFloor.position="right",a.options.scales.IdCommonQuantity.display=!0,a.resetZoom(),a.update()}),$("#btn-uncommon").on("click",function(o){a.data.datasets=n(s,"uncommon"),a.options.scales.IdCommonFloor.display=!0,a.options.scales.IdCommonFloor.position="right",a.options.scales.IdCommonQuantity.display=!0,a.resetZoom(),a.update()}),$("#btn-rare").on("click",function(o){a.data.datasets=n(s,"rare"),a.options.scales.IdCommonFloor.display=!0,a.options.scales.IdCommonFloor.position="right",a.options.scales.IdCommonQuantity.display=!0,a.resetZoom(),a.update()}),$("#btn-epic").on("click",function(o){a.data.datasets=n(s,"epic"),a.options.scales.IdCommonFloor.display=!0,a.options.scales.IdCommonFloor.position="right",a.options.scales.IdCommonQuantity.display=!0,a.resetZoom(),a.update()}),$("#btn-4-quantity").on("click",function(o){a.data.datasets=n(s,"4_shoes_quantity"),a.options.scales.IdCommonFloor.display=!1,a.options.scales.IdCommonFloor.position="right",a.options.scales.IdCommonQuantity.display=!0,a.resetZoom(),a.update()}),$("#btn-4-floor").on("click",function(o){a.data.datasets=n(s,"4_shoes_floor"),a.options.scales.IdCommonFloor.display=!0,a.options.scales.IdCommonFloor.position="left",a.options.scales.IdCommonQuantity.display=!1,a.resetZoom(),a.update()}),$("#btn-runners").on("click",function(o){a.data.datasets=n(s,"runners"),a.options.scales.IdCommonFloor.display=!1,a.options.scales.IdCommonFloor.position="right",a.options.scales.IdCommonQuantity.display=!0,a.resetZoom(),a.update()})});