"use strict";$(function(){let r,s;function a(o,r="common"){let s="",a="",l,e,n;switch(r){case"common":s="灰",a="rgb(169, 169, 169)",l=o.aryCommonShoesQuantity,e=o.aryCommonShoesFloor2;break;case"uncommon":s="綠",a="rgb(34, 139, 34)",l=o.aryUncommonShoesQuantity,e=o.aryUncommonShoesFloor2;break;case"rare":s="藍",a="rgb(0, 191, 255)",l=o.aryRareShoesQuantity,e=o.aryRareShoesFloor;break;case"epic":s="紫",a="rgb(148, 0, 211)",l=o.aryEpicShoesQuantity,e=o.aryEpicShoesFloor;break;case"runners":s="跑者人數",a="rgb(255, 69, 0)",n=o.aryRunners}var t=[];switch(r){case"runners":t.push({label:"跑者 - 數量",yAxisID:"IdCommonQuantity",backgroundColor:a,borderColor:a,data:n});break;case"4_shoes_quantity":t.push({label:"灰",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(169, 169, 169)",borderColor:"rgb(169, 169, 169)",data:o.aryCommonShoesQuantity}),t.push({label:"綠",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(34, 139, 34)",borderColor:"rgb(34, 139, 34)",data:o.aryUncommonShoesQuantity}),t.push({label:"藍",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryRareShoesQuantity}),t.push({label:"紫",yAxisID:"IdCommonQuantity",backgroundColor:"rgb(148, 0, 211)",borderColor:"rgb(148, 0, 211)",data:o.aryEpicShoesQuantity});break;case"4_shoes_floor":t.push({label:"灰",yAxisID:"IdCommonFloor",backgroundColor:"rgb(169, 169, 169)",borderColor:"rgb(169, 169, 169)",data:o.aryCommonShoesFloor}),t.push({label:"綠",yAxisID:"IdCommonFloor",backgroundColor:"rgb(34, 139, 34)",borderColor:"rgb(34, 139, 34)",data:o.aryUncommonShoesFloor}),t.push({label:"藍",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryRareShoesFloor}),t.push({label:"紫",yAxisID:"IdCommonFloor",backgroundColor:"rgb(148, 0, 211)",borderColor:"rgb(148, 0, 211)",data:o.aryEpicShoesFloor});break;case"4-scroll":t.push({label:"灰",yAxisID:"IdCommonFloor",backgroundColor:"rgb(169, 169, 169)",borderColor:"rgb(169, 169, 169)",data:o.aryCommonScrollFloor}),t.push({label:"綠",yAxisID:"IdCommonFloor",backgroundColor:"rgb(34, 139, 34)",borderColor:"rgb(34, 139, 34)",data:o.aryUncommonScrollFloor}),t.push({label:"藍",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryRareScrollFloor}),t.push({label:"紫",yAxisID:"IdCommonFloor",backgroundColor:"rgb(148, 0, 211)",borderColor:"rgb(148, 0, 211)",data:o.aryEpicScrollFloor});break;case"3-gem-rb":t.push({label:"一級RB",yAxisID:"IdCommonFloor",backgroundColor:"rgb(255, 215, 0)",borderColor:"rgb(255, 215, 0)",data:o.aryGemsFloor_rb1}),t.push({label:"二級RB",yAxisID:"IdCommonFloor",backgroundColor:"rgb(147, 112, 219)",borderColor:"rgb(147, 112, 219)",data:o.aryGemsFloor_rb2}),t.push({label:"三級RB",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryGemsFloor_rb3});break;case"4-gem-lv1":t.push({label:"一級E",yAxisID:"IdCommonFloor",backgroundColor:"rgb(255, 215, 0)",borderColor:"rgb(255, 215, 0)",data:o.aryGemsFloor_e1}),t.push({label:"一級C",yAxisID:"IdCommonFloor",backgroundColor:"rgb(178, 34, 34)",borderColor:"rgb(178, 34, 34)",data:o.aryGemsFloor_c1}),t.push({label:"一級L",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryGemsFloor_l1}),t.push({label:"一級R",yAxisID:"IdCommonFloor",backgroundColor:"rgb(147, 112, 219)",borderColor:"rgb(147, 112, 219)",data:o.aryGemsFloor_r1});break;case"4-gem-lv2":t.push({label:"二級E",yAxisID:"IdCommonFloor",backgroundColor:"rgb(255, 215, 0)",borderColor:"rgb(255, 215, 0)",data:o.aryGemsFloor_e2}),t.push({label:"二級C",yAxisID:"IdCommonFloor",backgroundColor:"rgb(178, 34, 34)",borderColor:"rgb(178, 34, 34)",data:o.aryGemsFloor_c2}),t.push({label:"二級L",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryGemsFloor_l2}),t.push({label:"二級R",yAxisID:"IdCommonFloor",backgroundColor:"rgb(147, 112, 219)",borderColor:"rgb(147, 112, 219)",data:o.aryGemsFloor_r2});break;case"4-gem-lv3":t.push({label:"三級E",yAxisID:"IdCommonFloor",backgroundColor:"rgb(255, 215, 0)",borderColor:"rgb(255, 215, 0)",data:o.aryGemsFloor_e3}),t.push({label:"三級C",yAxisID:"IdCommonFloor",backgroundColor:"rgb(178, 34, 34)",borderColor:"rgb(178, 34, 34)",data:o.aryGemsFloor_c3}),t.push({label:"三級L",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryGemsFloor_l3}),t.push({label:"三級R",yAxisID:"IdCommonFloor",backgroundColor:"rgb(147, 112, 219)",borderColor:"rgb(147, 112, 219)",data:o.aryGemsFloor_r3});break;case"4-gem-lv4":t.push({label:"四級E",yAxisID:"IdCommonFloor",backgroundColor:"rgb(255, 215, 0)",borderColor:"rgb(255, 215, 0)",data:o.aryGemsFloor_e4}),t.push({label:"四級C",yAxisID:"IdCommonFloor",backgroundColor:"rgb(178, 34, 34)",borderColor:"rgb(178, 34, 34)",data:o.aryGemsFloor_c4}),t.push({label:"四級L",yAxisID:"IdCommonFloor",backgroundColor:"rgb(0, 191, 255)",borderColor:"rgb(0, 191, 255)",data:o.aryGemsFloor_l4}),t.push({label:"四級R",yAxisID:"IdCommonFloor",backgroundColor:"rgb(147, 112, 219)",borderColor:"rgb(147, 112, 219)",data:o.aryGemsFloor_r4});break;default:t.push({label:s+" - 數量",yAxisID:"IdCommonQuantity",backgroundColor:a,borderColor:a,data:l}),t.push({label:s+" - 地板價",yAxisID:"IdCommonFloor",backgroundColor:"rgb(240, 128, 128)",borderColor:"rgb(240, 128, 128)",borderDash:[2,5],data:e})}return t}function o(){return{scales:{IdCommonQuantity:{type:"linear",display:!0,title:{text:"數量",display:!0},position:"left"},IdCommonFloor:{type:"linear",display:!0,title:{text:"Sol (Solana)",display:!0},position:"right",grid:{drawOnChartArea:!1}}},plugins:{zoom:{limits:{x:{minRange:50}},pan:{enabled:!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x",onZoomComplete({chart:o}){o.update()}}}}}}!async function(){s=await async function(){const o=await(await fetch("./db/stepnDB1.json")).json(),U=await(await fetch("./db/stepnDB2.json")).json(),r=[],s=[],a=[],l=[],e=[],n=[],t=[],m=[],d=[],i=[],b=[],c=[],u=[],p=[],y=[],C=[],g=[],h=[],F=[],I=[],f=[],k=[],_=[],D=[],x=[],G=[],S=[],A=[],Q=[],R=[],E=[],Z=[],$=[],v=[],w=[];return o.stepn.forEach(o=>{r.push(moment(o.time).format("M/D HH:mm ")),s.push(o.runners),a.push(o.shoes[0].quality),l.push(o.shoes[0].floor),e.push(o.shoes[1].quality),n.push(o.shoes[1].floor),t.push(o.shoes[2].quality),m.push(o.shoes[2].floor),d.push(o.shoes[3].quality),i.push(o.shoes[3].floor)}),U.stepn.forEach(o=>{b.push(o.floor.shoes.com),c.push(o.floor.shoes.ucom),u.push(o.floor.scrolls.com),p.push(o.floor.scrolls.ucom),y.push(o.floor.scrolls.rare),C.push(o.floor.scrolls.epic),g.push(o.floor.gems.rb1),h.push(o.floor.gems.rb2),F.push(o.floor.gems.rb3),I.push(o.floor.gems.e1),f.push(o.floor.gems.e2),k.push(o.floor.gems.e3),_.push(o.floor.gems.e4),D.push(o.floor.gems.c1),x.push(o.floor.gems.c2),G.push(o.floor.gems.c3),S.push(o.floor.gems.c4),A.push(o.floor.gems.l1),Q.push(o.floor.gems.l2),R.push(o.floor.gems.l3),E.push(o.floor.gems.l4),Z.push(o.floor.gems.r1),$.push(o.floor.gems.r2),v.push(o.floor.gems.r3),w.push(o.floor.gems.r4)}),{aryDateTime:r,aryRunners:s,aryCommonShoesQuantity:a,aryCommonShoesFloor:l,aryUncommonShoesQuantity:e,aryUncommonShoesFloor:n,aryRareShoesQuantity:t,aryRareShoesFloor:m,aryEpicShoesQuantity:d,aryEpicShoesFloor:i,aryCommonShoesFloor2:b,aryUncommonShoesFloor2:c,aryCommonScrollFloor:u,aryUncommonScrollFloor:p,aryRareScrollFloor:y,aryEpicScrollFloor:C,aryGemsFloor_rb1:g,aryGemsFloor_rb2:h,aryGemsFloor_rb3:F,aryGemsFloor_e1:I,aryGemsFloor_e2:f,aryGemsFloor_e3:k,aryGemsFloor_e4:_,aryGemsFloor_c1:D,aryGemsFloor_c2:x,aryGemsFloor_c3:G,aryGemsFloor_c4:S,aryGemsFloor_l1:A,aryGemsFloor_l2:Q,aryGemsFloor_l3:R,aryGemsFloor_l4:E,aryGemsFloor_r1:Z,aryGemsFloor_r2:$,aryGemsFloor_r3:v,aryGemsFloor_r4:w}}(),console.log(o(s)),r=new Chart(document.getElementById("StepNChart"),{type:"line",data:{labels:s.aryDateTime,datasets:a(s)},options:o(s)})}(),$("#btn-common").on("click",function(o){r.data.datasets=a(s,"common"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="right",r.options.scales.IdCommonQuantity.display=!0,r.resetZoom(),r.update()}),$("#btn-uncommon").on("click",function(o){r.data.datasets=a(s,"uncommon"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="right",r.options.scales.IdCommonQuantity.display=!0,r.resetZoom(),r.update()}),$("#btn-rare").on("click",function(o){r.data.datasets=a(s,"rare"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="right",r.options.scales.IdCommonQuantity.display=!0,r.resetZoom(),r.update()}),$("#btn-epic").on("click",function(o){r.data.datasets=a(s,"epic"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="right",r.options.scales.IdCommonQuantity.display=!0,r.resetZoom(),r.update()}),$("#btn-4-quantity").on("click",function(o){r.data.datasets=a(s,"4_shoes_quantity"),r.options.scales.IdCommonFloor.display=!1,r.options.scales.IdCommonFloor.position="right",r.options.scales.IdCommonQuantity.display=!0,r.resetZoom(),r.update()}),$("#btn-4-floor").on("click",function(o){r.data.datasets=a(s,"4_shoes_floor"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="left",r.options.scales.IdCommonQuantity.display=!1,r.resetZoom(),r.update()}),$("#btn-runners").on("click",function(o){r.data.datasets=a(s,"runners"),r.options.scales.IdCommonFloor.display=!1,r.options.scales.IdCommonFloor.position="right",r.options.scales.IdCommonQuantity.display=!0,r.resetZoom(),r.update()}),$("#btn-4-scroll").on("click",function(o){r.data.datasets=a(s,"4-scroll"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="left",r.options.scales.IdCommonQuantity.display=!1,r.resetZoom(),r.update()}),$("#btn-3-gem-rb").on("click",function(o){r.data.datasets=a(s,"3-gem-rb"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="left",r.options.scales.IdCommonQuantity.display=!1,r.resetZoom(),r.update()}),$("#btn-4-gem-lv1").on("click",function(o){r.data.datasets=a(s,"4-gem-lv1"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="left",r.options.scales.IdCommonQuantity.display=!1,r.resetZoom(),r.update()}),$("#btn-4-gem-lv2").on("click",function(o){r.data.datasets=a(s,"4-gem-lv2"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="left",r.options.scales.IdCommonQuantity.display=!1,r.resetZoom(),r.update()}),$("#btn-4-gem-lv3").on("click",function(o){r.data.datasets=a(s,"4-gem-lv3"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="left",r.options.scales.IdCommonQuantity.display=!1,r.resetZoom(),r.update()}),$("#btn-4-gem-lv4").on("click",function(o){r.data.datasets=a(s,"4-gem-lv4"),r.options.scales.IdCommonFloor.display=!0,r.options.scales.IdCommonFloor.position="left",r.options.scales.IdCommonQuantity.display=!1,r.resetZoom(),r.update()})});